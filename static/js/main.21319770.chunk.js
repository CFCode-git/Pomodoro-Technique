(this["webpackJsonppomodoro-technique"]=this["webpackJsonppomodoro-technique"]||[]).push([[0],{172:function(e,t,a){e.exports=a(323)},181:function(e,t,a){},201:function(e,t,a){},229:function(e,t,a){},234:function(e,t,a){},237:function(e,t,a){},238:function(e,t,a){},282:function(e,t,a){},288:function(e,t,a){},289:function(e,t,a){},292:function(e,t,a){},294:function(e,t,a){},295:function(e,t,a){},312:function(e,t,a){},313:function(e,t,a){},314:function(e,t,a){},323:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(4),s=a.n(r),i=a(17),c=a(65),u=a(49),l=Object(c.b)({todos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TODO":return[].concat(Object(u.a)(e),[t.payload]);case"INIT_TODOS":return Object(u.a)(t.payload);case"UPDATE_TODO":return e.map((function(e){return e.id===t.payload.id?t.payload:e}));case"EDIT_TODO":return e.map((function(e){return e.id===t.payload?Object.assign({},e,{editing:!0}):Object.assign({},e,{editing:!1})}));default:return e}},tomatoes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TOMATO":return[t.payload].concat(Object(u.a)(e));case"INIT_TOMATOES":return Object(u.a)(t.payload);case"EDIT_TOMATO":return e.map((function(e){return e.id===t.payload?Object.assign({},e,{editing:!0}):Object.assign({},e,{editing:!1})}));case"UPDATE_TOMATO":return e.map((function(e){return e.id===t.payload.id?t.payload:e}));default:return e}}}),d=Object(c.c)(l),p=(a(181),a(7)),m=a(8),f=a(10),h=a(9),v=a(50),T=a(28),y="";y="/Pomodoro-Technique";var b=Object(T.a)({basename:y}),E=(a(59),a(21)),g=(a(78),a(32)),O=a(11),k=a.n(O),j=a(18),w=a(327),N=a(146),D=a.n(N).a.create({baseURL:"https://gp-server.hunger-valley.com/",headers:{"t-app-id":"gxd4HcnaxxFM64hcN4nJmawQ","t-app-secret":"uYmMu1oVickC7zdox6L7TLJ3"}});D.interceptors.request.use((function(e){var t=localStorage.getItem("x-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return console.error(e),Promise.reject(e)})),D.interceptors.response.use((function(e){return e.headers["x-token"]&&localStorage.setItem("x-token",e.headers["x-token"]),e}),(function(e){return 401===e.response.status&&b.push("/login"),Promise.reject(e)}));var C,x,_=D,M=a(73),I=(a(201),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).onChange=function(e,t){n.setState((function(){var a={};return a[e]=t,a}))},n.submit=Object(j.a)(k.a.mark((function e(){var t,a,o;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,a=t.account,o=t.password,e.prev=1,e.next=4,_.post("sign_in/user",{account:a,password:o});case 4:console.log("\u6210\u529f"),n.props.history.push("/"),e.next=14;break;case 8:throw e.prev=8,e.t0=e.catch(1),window.alert("\u51fa\u9519\u4e86"),console.log(e.t0.message),console.log("\u6ca1\u6709\u6b64\u7528\u6237"),new Error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),n.state={account:"",password:""},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.account,n=t.password;return o.a.createElement("div",{className:"Login",id:"Login"},o.a.createElement("h1",null,"\u6b22\u8fce\u4f7f\u7528\u756a\u8304\u95f9\u949f"),o.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u4f60\u7684\u7528\u6237\u540d",prefix:o.a.createElement(w.a,{className:"site-form-item-icon"}),value:a,onChange:function(t){return e.onChange("account",t.target.value)}}),o.a.createElement(g.a.Password,{value:n,placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",onChange:function(t){return e.onChange("password",t.target.value)}}),o.a.createElement("div",{className:"buttonWrapper"},o.a.createElement(E.a,{type:"primary",shape:"round",className:"loginButton",onClick:this.submit},"\u767b\u5f55"),o.a.createElement("p",null,"\u8fd8\u6ca1\u6709\u8d26\u53f7\u5417\uff1f",o.a.createElement(M.a,{to:"/signup"}," \u6ce8\u518c ")," \u4e00\u4e0b\u5427~")))}}]),a}(o.a.Component)),S=(a(229),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).onChange=function(e,t){n.setState((function(){var a={};return a[e]=t,a}))},n.submit=Object(j.a)(k.a.mark((function e(){var t,a,o,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,a=t.account,o=t.password,r=t.passwordConformation,e.prev=1,e.next=4,_.post("sign_up/user",{account:a,password:o,password_confirmation:r});case 4:console.log("\u6210\u529f"),n.props.history.push("/"),e.next=14;break;case 8:throw e.prev=8,e.t0=e.catch(1),window.alert("\u51fa\u9519\u4e86"),console.log(e.t0.message),console.log("\u5bc6\u7801\u9519\u8bef"),new Error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),n.state={account:"",password:"",passwordConformation:""},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.account,n=t.password,r=t.passwordConformation;return o.a.createElement("div",{className:"SignUp",id:"SignUp"},o.a.createElement("h1",null,"\u6ce8\u518c"),o.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u4f60\u7684\u7528\u6237\u540d",prefix:o.a.createElement(w.a,{className:"site-form-item-icon"}),value:a,onChange:function(t){return e.onChange("account",t.target.value)}}),o.a.createElement(g.a.Password,{value:n,placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",onChange:function(t){return e.onChange("password",t.target.value)}}),o.a.createElement(g.a.Password,{value:r,placeholder:"\u8bf7\u786e\u8ba4\u5bc6\u7801",onChange:function(t){return e.onChange("passwordConformation",t.target.value)}}),o.a.createElement("div",{className:"buttonWrapper"},o.a.createElement(E.a,{type:"primary",shape:"round",className:"signUpButton",onClick:this.submit},"\u6ce8\u518c"),o.a.createElement("p",null,"\u5982\u679c\u4f60\u6709\u8d26\u53f7\uff0c\u53ef\u4ee5\u7acb\u5373",o.a.createElement(M.a,{to:"/login"}," \u767b\u5f55 ")," \u54e6")))}}]),a}(o.a.Component)),Y=a(19),H=(a(230),a(169)),A=(a(324),a(113)),U=a(329),P=a(332),R=function(e){return{type:"UPDATE_TODO",payload:e}},F=function(e){return{type:"UPDATE_TOMATO",payload:e}},W=(a(234),a(235),a(168)),K=(a(237),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={countDown:n.props.timer},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;C=setInterval((function(){var t=e.state.countDown;e.setState((function(e){return{countDown:e.countDown-1e3}})),document.title="".concat(e.countDown," - Pomodoro\u756a\u8304\u5de5\u4f5c\u6cd5"),t<1e3&&(e.props.onFinish(),document.title="Pomodoro\u756a\u8304\u5de5\u4f5c\u6cd5",clearInterval(C))}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(C)}},{key:"render",value:function(){var e=this.state.countDown/this.props.duration;return o.a.createElement("div",{className:"CountDown",id:"CountDown"},o.a.createElement("span",{className:"restTime"},this.countDown),o.a.createElement("div",{className:"progress",style:{width:"".concat(100*e,"%")}}))}},{key:"countDown",get:function(){var e=Math.floor(this.state.countDown/1e3/60),t=Math.floor(this.state.countDown/1e3%60);return"".concat(e<10?"0".concat(e):e,":").concat(t<10?"0".concat(t):t)}}]),a}(o.a.Component)),L=a(328),B=a(333),z=(a(238),W.a.confirm),q=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).onKeyUp=function(e){13===e.keyCode&&""!==n.state.description&&(n.updateTomato({description:n.state.description,ended_at:new Date}),n.setState({description:""}))},n.onFinish=function(){n.forceUpdate()},n.showConfirm=function(){z({title:"\u60a8\u76ee\u524d\u6b63\u5728\u4e00\u4e2a\u756a\u8304\u5de5\u4f5c\u65f6\u95f4\u4e2d,\u8981\u653e\u5f03\u8fd9\u4e2a\u756a\u8304\u5417?",icon:o.a.createElement(L.a,null),content:"\u575a\u6301\u5c31\u662f\u80dc\u5229\u54e6~~",okText:"\u6211\u4e0d\u884c\u4e86",cancelText:"\u7ee7\u7eed\u575a\u6301",onOk:function(){document.title="Pomodoro\u756a\u8304\u5de5\u4f5c\u6cd5",n.abortTomato()},onCancel:function(){console.log("\u52a0\u6cb9\u5440!")}})},n.abortTomato=function(){document.title="Pomodoro\u756a\u8304\u5de5\u4f5c\u6cd5";var e=window.prompt("\u8bf7\u8f93\u5165\u6253\u65ad\u539f\u56e0:")||"\u756a\u8304\u88ab\u6253\u65ad";n.updateTomato({aborted:!0,description:e})},n.updateTomato=function(){var e=Object(j.a)(k.a.mark((function e(t){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.put("tomatoes/".concat(n.props.unfinishedTomato.id),t);case 3:a=e.sent,n.props.updateTomato(a.data.resource),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),n.state={description:""},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=o.a.createElement("div",null);if(void 0===this.props.unfinishedTomato)t=o.a.createElement(E.a,{className:"startTomatoButton",onClick:function(){e.props.startTomato()}},"\u5f00\u59cb\u756a\u8304"),document.title="Pomodoro\u756a\u8304\u5de5\u4f5c\u6cd5";else{var a=Date.parse(this.props.unfinishedTomato.started_at),n=this.props.unfinishedTomato.duration,r=(new Date).getTime();if(r-a>n)t=o.a.createElement("div",{className:"inputWrapper"},o.a.createElement(g.a,{className:"inputTask",value:this.state.description,placeholder:"\u8bf7\u8f93\u5165\u4f60\u521a\u521a\u5b8c\u6210\u7684\u4efb\u52a1",onChange:function(t){return e.setState({description:t.target.value})},onKeyUp:function(t){return e.onKeyUp(t)}}),o.a.createElement(B.a,{className:"abort",onClick:this.showConfirm}));else if(r-a<n){var s=n-r+a;t=o.a.createElement("div",{className:"countDownWrapper"},o.a.createElement(K,{timer:s,onFinish:this.onFinish,duration:n}),o.a.createElement(B.a,{className:"abort",onClick:this.showConfirm}))}}return o.a.createElement("div",{className:"TomatoAction",id:"TomatoAction"},t)}}]),a}(n.Component),J=a(15),Q=a.n(J),V=(a(282),function(e){return o.a.createElement("div",{className:"TomatoItem"},o.a.createElement("span",{className:"timeRange"}," ",Q()(e.started_at).format("HH:mm")," - ",Q()(e.ended_at).format("HH:mm")," "),o.a.createElement("span",{className:"taskDescription"}," ",e.description," "))}),$=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.dates.map((function(t){var a=e.props.finishedTomatoes[t];return o.a.createElement("div",{key:t,className:"dailyTomato"},o.a.createElement("div",{className:"title"},o.a.createElement("span",{className:"dateTime"}," ",Q()(t).format("M\u6708DD\u65e5")," "),o.a.createElement("span",{className:"finishedCount"}," \u5b8c\u6210\u4e86",a.length,"\u4e2a\u756a\u8304 ")),a.map((function(e){return o.a.createElement(V,Object.assign({key:e.id},e))})))}));return o.a.createElement("div",{className:"TomatoList",id:"TomatoList"},t)}},{key:"dates",get:function(){return Object.keys(this.props.finishedTomatoes).sort((function(e,t){return Date.parse(t)-Date.parse(e)})).splice(0,3)}}]),a}(o.a.Component),G=a(41),X=a.n(G),Z=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).startTomato=Object(j.a)(k.a.mark((function t(){var a;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.post("tomatoes",{duration:15e5});case 3:a=t.sent,e.props.addTomato(a.data.resource),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e}return Object(m.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"Tomatoes",id:"Tomatoes"},o.a.createElement(q,{startTomato:this.startTomato,unfinishedTomato:this.unfinishedTomato,updateTomato:this.props.updateTomato}),o.a.createElement($,{finishedTomatoes:this.finishTomatoes}))}},{key:"unfinishedTomato",get:function(){return this.props.tomatoes.filter((function(e){return!e.description&&!e.ended_at&&!e.aborted}))[0]}},{key:"finishTomatoes",get:function(){var e=this.props.tomatoes.filter((function(e){return e.description&&e.ended_at&&!e.aborted}));return X.a.groupBy(e,(function(e){return Q()(e.started_at).format("YYYY-MM-D")}))}}]),a}(n.Component),ee={addTomato:function(e){return{type:"ADD_TOMATO",payload:e}},updateTomato:F},te=Object(i.b)((function(e,t){return Object(Y.a)({tomatoes:e.tomatoes},t)}),ee)(Z),ae=(a(284),a(114)),ne=a(330),oe=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).onKeyUp=function(e){13===e.keyCode&&""!==n.state.description&&n.postTodo()},n.postTodo=Object(j.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.post("todos",{description:n.state.description});case 3:t=e.sent,n.props.addTodo(t.data.resource),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:n.setState({description:""});case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),n.state={description:""},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.state.description,a=""===t?o.a.createElement("span",null):o.a.createElement(ne.a,{onClick:this.postTodo});return o.a.createElement("div",{className:"TodoInput",id:"TodoInput"},o.a.createElement(g.a,{placeholder:"\u6dfb\u52a0\u65b0\u4efb\u52a1",value:t,suffix:a,onChange:function(t){return e.setState({description:t.target.value})},onKeyUp:this.onKeyUp}))}}]),a}(o.a.Component),re={addTodo:function(e){return{type:"ADD_TODO",payload:e}}},se=Object(i.b)((function(e,t){return Object(Y.a)({},t)}),re)(oe),ie=(a(286),a(170)),ce=a(2),ue=a.n(ce),le=(a(288),a(326)),de=a(331),pe=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).inputRef=o.a.createRef(),n.updateTodo=function(){var e=Object(j.a)(k.a.mark((function e(t){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.completed&&(t.completed_at=new Date),e.prev=1,e.next=4,_.put("todos/".concat(n.props.id),t);case 4:a=e.sent,n.props.updateTodo(a.data.resource),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(1),new Error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),n.editTodo=function(){n.props.editTodo(n.props.id)},n.onKeyUp=function(e){13===e.keyCode&&""!==n.state.editText?n.updateTodo({description:n.state.editText}):27===e.keyCode&&n.updateTodo({description:n.state.oldText})},n.state={editText:n.props.description,oldText:n.props.description},n}return Object(m.a)(a,[{key:"componentDidUpdate",value:function(){this.inputRef.current&&this.inputRef.current.focus()}},{key:"render",value:function(){var e=this,t=o.a.createElement("div",{className:"editing"},o.a.createElement("input",{type:"text",value:this.state.editText,onChange:function(t){return e.setState({editText:t.target.value})},onKeyUp:this.onKeyUp,ref:this.inputRef}),o.a.createElement("div",{className:"iconWrapper"},o.a.createElement(ne.a,{onClick:function(){return e.updateTodo({description:e.state.editText})}}),o.a.createElement(le.a,{onClick:function(t){return e.updateTodo({deleted:!0})}}))),a=o.a.createElement("span",{className:"text",onClick:function(){return e.updateTodo({completed:!e.props.completed})}},this.props.description,o.a.createElement(de.a,{onClick:function(t){t.stopPropagation(),e.editTodo()}})),n=ue()({TodoItem:!0,editing:this.props.editing,completed:this.props.completed});return o.a.createElement("div",{className:n,id:"TodoItem"},o.a.createElement(ie.a,{checked:this.props.completed,onChange:function(t){return e.updateTodo({completed:t.target.checked})}}),this.props.editing?t:a)}}]),a}(o.a.Component),me={editTodo:function(e){return{type:"EDIT_TODO",payload:e}},updateTodo:R},fe=Object(i.b)((function(e,t){return Object(Y.a)({},t)}),me)(pe),he=(a(289),ae.a.Panel),ve=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return o.a.createElement("div",{className:"Todos",id:"Todos"},o.a.createElement(se,null),o.a.createElement("div",{className:"todoList"},this.unCompletedTodos.map((function(e){return o.a.createElement(fe,Object.assign({key:e.id},e))})),o.a.createElement(ae.a,{bordered:!1},o.a.createElement(he,{header:"\u4eca\u65e5\u5b8c\u6210\u4efb\u52a1",key:"1"},this.completedTodos.filter((function(e){return Q()(e.completed_at).isSame(Q()(new Date),"day")})).map((function(e){return o.a.createElement(fe,Object.assign({key:e.id},e))})))),","))}},{key:"unDeletedTodos",get:function(){return this.props.todos.filter((function(e){return!e.deleted}))}},{key:"unCompletedTodos",get:function(){return this.unDeletedTodos.filter((function(e){return!e.completed}))}},{key:"completedTodos",get:function(){return this.unDeletedTodos.filter((function(e){return e.completed}))}}]),a}(o.a.Component),Te={updateTodo:R},ye=Object(i.b)((function(e,t){return Object(Y.a)({todos:e.todos},t)}),Te)(ve),be=(a(292),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).point=function(){var t=e.props.polygonWidth;t=null===t?240:t;var a=Object.keys(e.props.data).sort((function(e,t){return Date.parse(e)-Date.parse(t)})),n=a[0];if(n){var o,r=(new Date).getTime()-Date.parse(n),s=0,i=a.map((function(t){var a=(Date.parse(t)-Date.parse(n))/r*240,i=60*(1-(s+=e.props.data[t].length)/e.props.totalFinishedCount);return o=i,"".concat(a,",").concat(i)}));return["0,60"].concat(Object(u.a)(i),["".concat(t,",").concat(o),"".concat(t,",60")]).join(" ")}return"0,60 ".concat(t,",60")},e}return Object(m.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"Polygon"},o.a.createElement("svg",{style:{width:"100%",height:"60"}},o.a.createElement("polygon",{fill:"rgba(215,78,78,0.1)",stroke:"rgba(215,78,78,0.5)",strokeWidth:"1",points:this.point()})))}}]),a}(o.a.Component)),Ee=(a(138),a(69)),ge=(a(294),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).updateTodo=function(){var t=Object(j.a)(k.a.mark((function t(a){var n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.put("todos/".concat(e.props.todo.id),a);case 3:n=t.sent,e.props.updateTodo(n.data.resource),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(m.a)(a,[{key:"render",value:function(){var e,t,a=this;return"finished"===this.props.itemType?(t="HH:mm",e=o.a.createElement("div",null,o.a.createElement("span",{onClick:function(){return a.updateTodo({finished:!1})}}," \u6062\u590d "),o.a.createElement("span",{onClick:function(){return a.updateTodo({deleted:!0})}}," \u5220\u9664 "))):"deleted"===this.props.itemType&&(t="YYYY-MM-DD",e=o.a.createElement("div",null,o.a.createElement("span",{onClick:function(){return a.updateTodo({deleted:!1})}}," \u6062\u590d "))),o.a.createElement("div",{className:"TodoHistoryTodoItem",id:"TodoHistoryTodoItem"},o.a.createElement("div",{className:"text"},o.a.createElement("span",{className:"time"},Q()(this.props.todo.updated_at).format("".concat(t))),o.a.createElement("span",{className:"description"},this.props.todo.description)),o.a.createElement("div",{className:"action"},e))}}]),a}(o.a.Component)),Oe={updateTodo:R},ke=Object(i.b)((function(e,t){return Object(Y.a)({},t)}),Oe)(ge),je=(a(295),Ee.a.TabPane),we=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.finishedDates.map((function(t){return o.a.createElement("div",{key:t,className:"dailyTodos"},o.a.createElement("div",{className:"summary"},o.a.createElement("p",{className:"date"},o.a.createElement("span",null,Q()(t).format("MM\u6708D\u65e5")),o.a.createElement("span",null,"0"===(a=Q()(t).format("d"))?"\u5468\u65e5":"1"===a?"\u5468\u4e00":"2"===a?"\u5468\u4e8c":"3"===a?"\u5468\u4e09":"4"===a?"\u5468\u56db":"5"===a?"\u5468\u4e94":"\u5468\u516d")),o.a.createElement("p",{className:"finishedCount"},"\u5b8c\u6210\u4e86",e.dailyFinishedTodos[t].length,"\u4e2a\u4efb\u52a1")),o.a.createElement("div",{className:"todoList"},e.dailyFinishedTodos[t].map((function(e){return o.a.createElement(ke,{key:e.id,todo:e,itemType:"finished"})}))));var a})),a=this.deletedTodos.map((function(e){return o.a.createElement(ke,{key:e.id,todo:e,itemType:"deleted"})}));return o.a.createElement(Ee.a,{defaultActiveKey:"1"},o.a.createElement(je,{tab:"\u5df2\u5b8c\u6210\u4efb\u52a1",key:"1"},o.a.createElement("div",{className:"TodoHistory",id:"TodoHistory"},t)),o.a.createElement(je,{tab:"\u5df2\u5220\u9664\u4efb\u52a1",key:"2"},o.a.createElement("div",{className:"TodoHistory",id:"TodoHistory"},a)))}},{key:"finishedTodos",get:function(){return this.props.todos.filter((function(e){return e.completed&&!e.deleted}))}},{key:"deletedTodos",get:function(){return this.props.todos.filter((function(e){return e.deleted}))}},{key:"dailyFinishedTodos",get:function(){return X.a.groupBy(this.finishedTodos,(function(e){return Q()(e.updated_at).format("YYYY-MM-D")}))}},{key:"finishedDates",get:function(){return Object.keys(this.dailyFinishedTodos).sort((function(e,t){return Date.parse(t)-Date.parse(e)}))}}]),a}(o.a.Component),Ne=Object(i.b)((function(e,t){return Object(Y.a)({todos:e.todos},t)}))(we),De=(a(312),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).inputRef=o.a.createRef(),n.updateTomato=function(){var e=Object(j.a)(k.a.mark((function e(t){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.put("tomatoes/".concat(n.props.tomato.id),t);case 3:a=e.sent,n.props.updateTomato(a.data.resource),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),n.onKeyUp=function(e){13===e.keyCode&&""!==n.state.editText&&n.updateTomato({description:n.state.editText}),27===e.keyCode&&n.updateTomato({description:n.state.oldText})},n.editTomato=function(){n.props.editTomato(n.props.tomato.id)},n.state={editText:n.props.tomato.description,oldText:n.props.tomato.description},n}return Object(m.a)(a,[{key:"componentDidUpdate",value:function(){this.inputRef.current&&this.inputRef.current.focus()}},{key:"render",value:function(){var e,t,a=this,n=o.a.createElement("div",{className:"editing"},o.a.createElement("input",{type:"text",value:this.state.editText,onChange:function(e){return a.setState({editText:e.target.value})},onKeyUp:this.onKeyUp,ref:this.inputRef}),o.a.createElement("span",{className:"button",onClick:function(){return a.updateTomato({description:a.state.editText})}},"\u63d0\u4ea4")),r=o.a.createElement("div",{className:"action"},o.a.createElement("span",{className:"description",onDoubleClick:function(){return a.editTomato()}},this.props.tomato.description),"aborted"===this.props.itemType?o.a.createElement("span",{className:"button",onClick:function(){return a.updateTomato({aborted:!1})}},"\u6062\u590d\u81f3\u5df2\u5b8c\u6210"):o.a.createElement("span",{className:"button",onClick:function(){return a.updateTomato({aborted:!0})}},"\u79fb\u9664"));return"finished"===this.props.itemType?(t="HH:mm",e=o.a.createElement("div",{className:"finished"},o.a.createElement("span",{className:"time"}," ",Q()(this.props.tomato.started_at).format("".concat(t))," - ",Q()(this.props.tomato.ended_at).format("".concat(t))," "),this.props.tomato.editing?n:r)):"aborted"===this.props.itemType&&(t="YYYY-MM-DD",e=o.a.createElement("div",{className:"aborted"},o.a.createElement("span",{className:"time"}," ",Q()(this.props.tomato.started_at).format("".concat(t))," "),e=this.props.tomato.editing?n:r)),o.a.createElement("div",{className:"TomatoHistoryItem",id:"TomatoHistoryItem"},o.a.createElement("div",{className:"text"},e))}}]),a}(o.a.Component)),Ce={updateTomato:F,editTomato:function(e){return{type:"EDIT_TOMATO",payload:e}}},xe=Object(i.b)((function(e,t){return Object(Y.a)({},t)}),Ce)(De),_e=(a(313),Ee.a.TabPane),Me=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.finishedDates.map((function(t){return o.a.createElement("div",{key:t,className:"dailyTomatoes"},o.a.createElement("div",{className:"summary"},o.a.createElement("p",{className:"date"},o.a.createElement("span",{className:"date_time"},Q()(t).format("MM\u6708D\u65e5")),o.a.createElement("span",{className:"week_day"},"0"===(a=Q()(t).format("d"))?"\u5468\u65e5":"1"===a?"\u5468\u4e00":"2"===a?"\u5468\u4e8c":"3"===a?"\u5468\u4e09":"4"===a?"\u5468\u56db":"5"===a?"\u5468\u4e94":"\u5468\u516d")),o.a.createElement("p",{className:"finishedCount"},"\u5b8c\u6210\u4e86 ",e.dailyFinishedTomatoes[t].length," \u4e2a\u756a\u8304 \u603b\u8ba1 ",(25*e.dailyFinishedTomatoes[t].length/60).toFixed(2)," \u5c0f\u65f6")),o.a.createElement("div",{className:"tomatoList"},e.dailyFinishedTomatoes[t].map((function(e){return o.a.createElement(xe,{key:e.id,tomato:e,itemType:"finished"})}))));var a})),a=this.abortedTomatoes.map((function(e){return o.a.createElement(xe,{key:e.id,tomato:e,itemType:"aborted"})}));return o.a.createElement(Ee.a,{defaultActiveKey:"1"},o.a.createElement(_e,{tab:"\u5df2\u5b8c\u6210\u7684\u756a\u8304",key:"1"},o.a.createElement("div",{className:"TomatoHistory",id:"TomatoHistory"},t)),o.a.createElement(_e,{tab:"\u6253\u65ad\u8bb0\u5f55",key:"2"},o.a.createElement("div",{className:"TomatoHistory",id:"TomatoHistory"},a)))}},{key:"finishedTomatoes",get:function(){return this.props.tomatoes.filter((function(e){return e.description&&e.ended_at&&!e.aborted}))}},{key:"abortedTomatoes",get:function(){return this.props.tomatoes.filter((function(e){return e.aborted}))}},{key:"dailyFinishedTomatoes",get:function(){return X.a.groupBy(this.finishedTomatoes,(function(e){return Q()(e.started_at).format("YYYY-MM-D")}))}},{key:"finishedDates",get:function(){return Object.keys(this.dailyFinishedTomatoes).sort((function(e,t){return Date.parse(t)-Date.parse(e)}))}}]),a}(o.a.Component),Ie=Object(i.b)((function(e,t){return Object(Y.a)({tomatoes:e.tomatoes},t)}))(Me);!function(e){e.Todos="Todos",e.Tomatoes="Tomatoes",e.Statistics="Statistics"}(x||(x={}));var Se=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).polygonRef=o.a.createRef(),n.handleResize=function(){n.setState({polygonWidth:n.polygonRef.current&&n.polygonRef.current.clientWidth})},n.state={view:x.Tomatoes,polygonWidth:null,selected:"TomatoesHistory"},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.handleResize(),window.addEventListener("resize",this.handleResize.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize.bind(this))}},{key:"render",value:function(){var e,t=this;return this.state.view===x.Todos?e=o.a.createElement(Ne,null):this.state.view===x.Tomatoes?e=o.a.createElement(Ie,null):this.state.view===x.Statistics&&(e=o.a.createElement("p",null,"statistics")),o.a.createElement("div",{className:"Statistics",id:"Statistics"},o.a.createElement("ul",{className:"group"},o.a.createElement("li",{className:"TomatoesHistory"===this.state.selected?"active":"",onClick:function(){return t.setState({view:x.Tomatoes,selected:"TomatoesHistory"})}},o.a.createElement("div",{className:"description"},o.a.createElement("span",{className:"title"},"\u756a\u8304\u5386\u53f2"),o.a.createElement("span",{className:"subtitle"},"\u7d2f\u8ba1\u5b8c\u6210\u756a\u8304"),o.a.createElement("span",{className:"finishNumber"},this.finishedTomatoes.length)),o.a.createElement("div",{className:"polygon",ref:this.polygonRef},o.a.createElement(be,{data:this.dailyTomatoes,totalFinishedCount:this.finishedTomatoes.length,polygonWidth:this.state.polygonWidth}))),o.a.createElement("li",{className:"TodosHistory"===this.state.selected?"active":"",onClick:function(){return t.setState({view:x.Todos,selected:"TodosHistory"})}},o.a.createElement("div",{className:"description"},o.a.createElement("span",{className:"title"},"\u4efb\u52a1\u5386\u53f2"),o.a.createElement("span",{className:"subtitle"},"\u7d2f\u8ba1\u5b8c\u6210\u4efb\u52a1"),o.a.createElement("span",{className:"finishNumber"},this.finishedTodos.length)),o.a.createElement("div",{className:"polygon"},o.a.createElement(be,{data:this.dailyTodos,totalFinishedCount:this.finishedTodos.length,polygonWidth:this.state.polygonWidth})))),e)}},{key:"finishedTodos",get:function(){return this.props.todos.filter((function(e){return e.completed&&!e.deleted}))}},{key:"dailyTodos",get:function(){return X.a.groupBy(this.finishedTodos,(function(e){return Q()(e.updated_at).format("YYYY-MM-D")}))}},{key:"finishedTomatoes",get:function(){return this.props.tomatoes.filter((function(e){return e.description&&e.ended_at&&!e.aborted}))}},{key:"dailyTomatoes",get:function(){return X.a.groupBy(this.finishedTomatoes,(function(e){return Q()(e.updated_at).format("YYYY-MM-D")}))}}]),a}(o.a.Component),Ye=Object(i.b)((function(e,t){return Object(Y.a)({todos:e.todos,tomatoes:e.tomatoes},t)}))(Se),He=(a(314),o.a.createElement(A.a,null,o.a.createElement(A.a.Item,{key:"1",onClick:function(){localStorage.setItem("x-token",""),b.push("login")}},o.a.createElement(U.a,null),"\u6ce8\u9500"))),Ae=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).getTodos=Object(j.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.get("todos");case 3:t=e.sent,a=t.data.resources.map((function(e){return Object.assign({},e,{editing:!1})})),n.props.initTodos(a),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),new Error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),n.getTomatoes=Object(j.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.get("tomatoes");case 3:t=e.sent,n.props.initTomatoes(t.data.resources),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),n.getMe=Object(j.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.get("me");case 2:t=e.sent,n.setState({user:t.data});case 4:case"end":return e.stop()}}),e)}))),n.state={user:{}},n}return Object(m.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){var e=Object(j.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMe();case 2:return e.next=4,this.getTodos();case 4:return e.next=6,this.getTomatoes();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement("div",{className:"Home",id:"Home"},o.a.createElement("header",null,o.a.createElement("span",{className:"logo"},"Pomodoro"),o.a.createElement(H.a,{className:"user",overlay:He},o.a.createElement("span",{className:"username"},(this.state.user&&this.state.user.account)+" , \u4f60\u597d"," ",o.a.createElement(P.a,{style:{marginLeft:2}})))),o.a.createElement("main",{className:"timerAndTodos"},o.a.createElement(te,null),o.a.createElement(ye,null)),o.a.createElement(Ye,null))}}]),a}(o.a.Component),Ue={initTodos:function(e){return{type:"INIT_TODOS",payload:e}},initTomatoes:function(e){return{type:"INIT_TOMATOES",payload:e}}},Pe=Object(i.b)((function(e,t){return Object(Y.a)({},t)}),Ue)(Ae),Re=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return o.a.createElement(v.b,{history:b},o.a.createElement("div",null,o.a.createElement(v.a,{exact:!0,path:"/",component:Pe}),o.a.createElement(v.a,{path:"/signup",component:S}),o.a.createElement(v.a,{path:"/login",component:I})))}}]),a}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(i.a,{store:d},o.a.createElement(Re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[172,1,2]]]);
//# sourceMappingURL=main.21319770.chunk.js.map